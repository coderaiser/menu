var MenuIO,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=a(e,"js-menu-item");return t}function u(e){var t=a(e,"js-menu");return t}function a(e,t,n){var i,u;return n||(n="data-name"),e&&(u=e.getAttribute(n),u===t&&(i=!0)),i}function r(t){var n,i,u="data-menu",r="js-submenu";return i=e(t),n=a(i,r,u)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=u,this.isSubMenu=r}MenuIO=function(n,i,u){function a(){var e,t=Util.isObject(u);t||(e=u,u={},u[e]=null),b=r(u),I.addEventListener("click",m),I.addEventListener("contextmenu",c)}function r(e){var t,n="",i="",u=function(e,t){var n='data-menu="js-submenu"',i="";return t?t+=".":t="",Object.keys(e).forEach(function(a){var r="",s="",m="",c=t+a,l=e[a],o=Util.isObject(l);o?(r=Util.render(j.MAIN,{items:u(l,c)}),s=" menu-submenu",m=" "+n):g[c]=l,M.icon&&(s+=" icon icon-"+a),i+=Util.render(j.ITEM,{name:a,subitems:r,className:s,attribute:m,path:c})}),i};return i=u(e),n=document.createElement("ul"),n.setAttribute("data-name","js-menu"),n.className="menu menu-hidden",n.innerHTML=i,v.appendChild(n),t=v.querySelector('[data-name="js-menu"]')}function s(e,t){var n,i=N.getItem(e),u=N.isName(i),a=N.isItem(i),r=N.isSubMenu(i);return u&&a||(i=document.elementFromPoint(t.x,t.y),r=N.isSubMenu(i),u=N.isName(i),a=N.isItem(i)),n={name:u,item:a,sub:r}}function m(e,t){var n,i=e.target,u=t||s(i,{x:e.clientX,y:e.clientY});u.sub?e.preventDefault():(d(),(u.name||u.item)&&(n=f(i),Util.exec(n)))}function c(e){var t=e.target,n=e.clientX,i=e.clientY,u=s(t,{x:n,y:i});u.name||u.item||u.sub?m(e,u):o(n,i),e.preventDefault()}function l(t,n){var i=Util.isNumber(t),u=Util.isNumber(n),a=h(),r=e.innerHeight;a+n>r&&(n-=a),i&&(b.style.left=t+"px"),u&&(b.style.top=n-15+"px")}function o(e,t){b.classList.remove("menu-hidden"),l(e,t)}function d(){b.classList.add("menu-hidden"),Util.exec(M.onClose)}function f(e){var t,n;return e=N.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=g[t]}function h(){var e,t;return p||(e=getComputedStyle(b),t=e.height,p=parseInt(t,10)),p}if(!(this instanceof MenuIO))return new MenuIO(n,i,u);var b,v,p,I,M={},N=new t,g={},j={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path={{ path }}>{{ name }}</label>{{ subitems }}</li>'};u?(v=I=n,M=i):i?(v=n,u=i):(v=document.body,I=e,u=n),this.show=o,this.hide=d,a()}}(window);
!function(e){"use strict";function t(){var e=this;this.exec=function(t){var n,r=e.slice(arguments,1);return e.isFunction(t)&&(n=t.apply(null,r)),n},this.isArray=function(e){return Array.isArray(e)},this.isArrayBuffer=function(e){var t=this.getType(e),n="arraybuffer"===t;return n},this.isBoolean=function(t){return e.isType(t,"boolean")},this.isFunction=function(t){return e.isType(t,"function")},this.isNumber=function(t){return e.isType(t,"number")},this.isObject=function(t){var n=e.getType(t),r="object"===n;return r},this.isString=function(t){return e.isType(t,"string")},this.isUndefined=function(t){return e.isType(t,"undefined")},this.isFile=function(t){var n,r,i="[object File]";return n=e.execIfExist(t,"toString"),r=n===i},this.isType=function(e,t){return typeof e===t},this.getType=function(e){var t=new RegExp("\\s([a-zA-Z]+)"),n={},r=n.toString,i=r.call(e),s=i.match(t)[1],u=s.toLowerCase();return u},this.slice=function(e,t){var n;return e&&(n=[].slice.call(e,t)),n},this.render=function(t,n){var r,i=!0,s="\\s*",u=["{{"+s,s+"}}"];return r=e.ownRender(t,n,u,i)},this.ownRender=function(t,n,r,i){var s,u,o,c,a,f=t;c=r[0],a=r[1]||c;for(u in n)s=n[u],s=e.exec(s)||s,o=c+u+a,f=e.replaceStr(f,o,s,i);return o=c+".*"+a,f=e.replaceStr(f,o,"",i)},this.replaceStr=function(t,n,r,i){var s=e.isString(t),u=new RegExp(n,"g");return s&&n&&(i||(n=e.escapeRegExp(n)),t=t.replace(u,r)),t},this.escapeRegExp=function(t){var n=t,r=e.isString(t);return r&&(n=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),n}}var n=e.window?window:global;"object"==typeof module&&module.exports?module.exports=new t:n.Util||(n.Util=new t)}(this);