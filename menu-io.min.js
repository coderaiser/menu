var MenuIO,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=a(e,"js-menu-item");return t}function u(e){var t=a(e,"js-menu");return t}function a(e,t,n){var i,u;return n||(n="data-name"),e&&(u=e.getAttribute(n),u===t&&(i=!0)),i}function r(t){var n,i,u="data-menu",r="js-submenu";return i=e(t),n=a(i,r,u)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=u,this.isSubMenu=r}MenuIO=function(n,i,u){function a(){var e,t=Util.isObject(u);t||(e=u,u={},u[e]=null),h=r(u),I.addEventListener("click",m),I.addEventListener("contextmenu",c)}function r(e){var t,n="",i=function(e,t){var n='data-menu="js-submenu"',u="";return t?t+=".":t="",Object.keys(e).forEach(function(a){var r,s="",m="",c="",l=t+a,o=e[a],d=Util.isObject(o);d?(s=Util.render(U.MAIN,{items:i(o,l)}),m=" menu-submenu",c=" "+n):N[l]=o,x.icon&&(r=Util.convertName(a),m+=" icon icon-"+r),u+=Util.render(U.ITEM,{name:a,subitems:s,className:m,attribute:c,path:l})}),u};return n=i(e),t=document.createElement("ul"),t.setAttribute("data-name","js-menu"),t.className="menu menu-hidden",t.innerHTML=n,v.appendChild(t),t}function s(e,t){var n,i=M.getItem(e),u=M.isName(i),a=M.isItem(i),r=M.isSubMenu(i);return u&&a||(i=document.elementFromPoint(t.x,t.y),r=M.isSubMenu(i),u=M.isName(i),a=M.isItem(i)),n={name:u,item:a,sub:r}}function m(e,t){var n,i,u=x.afterClick,a=x.beforeClick,r=x.name,m=e.target,c=t||s(m,{x:e.clientX,y:e.clientY});i=Util.exec(a,r),c.sub?e.preventDefault():(d(),i||!c.name&&!c.item||(n=f(m),Util.exec(n),Util.exec(u)))}function c(e){var t=e.target,n=e.clientX,i=e.clientY,u=s(t,{x:n,y:i});u.name||u.item||u.sub?m(e,u):(d(),o(n,i)),e.preventDefault()}function l(t,n){var i=Util.isNumber(t),u=Util.isNumber(n),a=b(),r=e.innerHeight;a+n>r&&(n-=a),i&&(h.style.left=t+"px"),u&&(h.style.top=n-15+"px")}function o(e,t){var n=x.beforeShow,i=x.name,u={x:e,y:t,name:i},a=Util.exec(n,u);a||(h.classList.remove("menu-hidden"),l(u.x,u.y))}function d(){var e=Util.exec(x.beforeClose);e||h.classList.add("menu-hidden")}function f(e){var t,n;return e=M.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=N[t]}function b(){var e,t;return p||(e=getComputedStyle(h),t=e.height,p=parseInt(t,10)),p}if(!(this instanceof MenuIO))return new MenuIO(n,i,u);var h,v,p,I,x={},M=new t,N={},U={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path="{{ path }}">{{ name }}</label>{{ subitems }}</li>'};u?(v=I=n,x=i):i?(v=I=n,u=i):(v=document.body,I=e,u=n),this.show=o,this.hide=d,a()}}(window);
!function(r){"use strict";function e(){var r=this;this.exec=function(e){var t,n=r.slice(arguments,1);return r.isFunction(e)&&(t=e.apply(null,n)),t},this.isArray=function(r){return Array.isArray(r)},this.isArrayBuffer=function(r){var e=this.getType(r),t="arraybuffer"===e;return t},this.isBoolean=function(e){return r.isType(e,"boolean")},this.isFunction=function(e){return r.isType(e,"function")},this.isNumber=function(e){return r.isType(e,"number")},this.isObject=function(e){var t=r.getType(e),n="object"===t;return n},this.isString=function(e){return r.isType(e,"string")},this.isUndefined=function(e){return r.isType(e,"undefined")},this.isFile=function(e){var t,n,i="[object File]";return t=r.execIfExist(e,"toString"),n=t===i},this.isType=function(r,e){return typeof r===e},this.getType=function(r){var e=new RegExp("\\s([a-zA-Z]+)"),t={},n=t.toString,i=n.call(r),s=i.match(e)[1],u=s.toLowerCase();return u},this.slice=function(r,e){var t;return r&&(t=[].slice.call(r,e)),t},this.render=function(e,t){var n,i=!0,s="\\s*",u=["{{"+s,s+"}}"];return n=r.ownRender(e,t,u,i)},this.ownRender=function(e,t,n,i){var s,u,o,c,a,f=e;c=n[0],a=n[1]||c;for(u in t)s=t[u],s=r.exec(s)||s,o=c+u+a,f=r.replaceStr(f,o,s,i);return o=c+".*"+a,f=r.replaceStr(f,o,"",i)},this.replaceStr=function(e,t,n,i){var s,u=r.isString(e);return u&&t&&(i||(t=r.escapeRegExp(t)),s=new RegExp(t,"g"),e=e.replace(s,n)),e},this.rmStr=function(e,t,n){var i,s=[],u=r.isString(e),o=r.isArray(t),c=function(r,e){var t=r.replace(e,"");return t};return i=n?c:r.replaceStr,u&&t&&(o?s=t:s.push(t),s.forEach(function(r){e=i(e,r,"")})),e},this.escapeRegExp=function(e){var t=e,n=r.isString(e);return n&&(t=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),t},this.convertName=function(e){var t=e&&e.toLowerCase();return t=r.rmStr(t,["(",")"]),t=r.replaceStr(t," ","-")}}var t=r.window?window:global;"object"==typeof module&&module.exports?module.exports=new e:t.Util||(t.Util=new e)}(this);