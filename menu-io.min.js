var MenuIO,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=a(e,"js-menu-item");return t}function u(e){var t=a(e,"js-menu");return t}function a(e,t,n){var i,u;return n||(n="data-name"),e&&(u=e.getAttribute(n),u===t&&(i=!0)),i}function r(t){var n,i,u="data-menu",r="js-submenu";return i=e(t),n=a(i,r,u)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=u,this.isSubMenu=r}MenuIO=function(n,i,u){function a(){var e,t=Util.type.object(u);t||(e=u,u={},u[e]=null),h=r(u),y.addEventListener("click",s),y.addEventListener("contextmenu",c)}function r(e){var t,n="",i=function(e,t){var n='data-menu="js-submenu"',u="";return t?t+=".":t="",Object.keys(e).forEach(function(a){var r,m="",s="",c="",l=t+a,o=e[a],d=Util.type.object(o);d?(m=Util.render(U.MAIN,{items:i(o,l)}),s=" menu-submenu",c=" "+n):M[l]=o,I.icon&&(r=Util.convertName(a),s+=" icon icon-"+r),u+=Util.render(U.ITEM,{name:a,subitems:m,className:s,attribute:c,path:l})}),u};return n=i(e),t=document.createElement("ul"),t.setAttribute("data-name","js-menu"),t.className="menu menu-hidden",t.innerHTML=n,v.appendChild(t),t}function m(e,t){var n,i=x.getItem(e),u=x.isName(i),a=x.isItem(i),r=x.isSubMenu(i);return u&&a||(i=document.elementFromPoint(t.x,t.y),r=x.isSubMenu(i),u=x.isName(i),a=x.isItem(i)),n={name:u,item:a,sub:r}}function s(e,t){var n,i,u=I.afterClick,a=I.beforeClick,r=I.name,s=e.target,c=t||m(s,{x:e.clientX,y:e.clientY});i=Util.exec(a,r),c.sub?e.preventDefault():(d(),i||!c.name&&!c.item||(n=f(s),Util.exec(n),Util.exec(u)))}function c(e){var t=e.target,n=e.clientX,i=e.clientY,u=m(t,{x:n,y:i});u.name||u.item||u.sub?s(e,u):(d(),o(n,i)),e.preventDefault()}function l(t,n){var i=Util.type.number(t),u=Util.type.number(n),a=b(),r=e.innerHeight;a+n>r&&(n-=a),i&&(h.style.left=t+"px"),u&&(h.style.top=n-15+"px")}function o(e,t){var n=I.beforeShow,i=I.name,u={x:e,y:t,name:i},a=Util.exec(n,u);a||(h.classList.remove("menu-hidden"),l(u.x,u.y))}function d(){var e=Util.exec(I.beforeClose);e||h.classList.add("menu-hidden")}function f(e){var t,n;return e=x.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=M[t]}function b(){var e,t;return p||(e=getComputedStyle(h),t=e.height,p=parseInt(t,10)),p}if(!(this instanceof MenuIO))return new MenuIO(n,i,u);var h,v,p,y,I={},x=new t,M={},U={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path="{{ path }}">{{ name }}</label>{{ subitems }}</li>'};u?(v=y=n,I=i):i?(v=y=n,u=i):(v=document.body,y=e,u=n),this.show=o,this.hide=d,a()}}(window);
!function(r){"use strict";function n(){function r(){function r(r){var n=new RegExp("\\s([a-zA-Z]+)"),e={}.toString.call(r),t=e.match(n)[1],i=t.toLowerCase();return i}return r.array=function(n){var e;return e=Array.isArray?Array.isArray(n):"array"===r(n)},r.arrayBuffer=function(n){return"arraybuffer"===r(n)},r.boolean=function(r){return"boolean"==typeof r},r.function=function(r){return"function"==typeof r},r.number=function(r){return"number"==typeof r},r.object=function(r){var e=n.type(r),t="object"===e;return t},r.string=function(r){return"string"==typeof r},r.undefined=function(r){return"undefined"==typeof r},r.file=function(r){var e,t,i="[object File]";return e=n.exec.ifExist(r,"toString"),t=e===i},r}var n=this;this.exec=function(r){var e,t=n.slice(arguments,1);return n.isFunction(r)&&(e=r.apply(null,t)),e},this.type=new r,this.slice=function(r,n){var e;return r&&(e=[].slice.call(r,n)),e},this.render=function(r,e){var t,i=!0,o="\\s*",u=["{{"+o,o+"}}"];return t=n.ownRender(r,e,u,i)},this.ownRender=function(r,e,t,i){var o,u,c,a,f,s=r;a=t[0],f=t[1]||a;for(u in e)o=e[u],o=n.exec(o)||o,c=a+u+f,s=n.replaceStr(s,c,o,i);return c=a+".*"+f,s=n.replaceStr(s,c,"",i)},this.replaceStr=function(r,e,t,i){var o,u=n.isString(r);return u&&e&&(i||(e=n.escapeRegExp(e)),o=new RegExp(e,"g"),r=r.replace(o,t)),r},this.rmStr=function(r,e,t){var i,o=[],u=n.isString(r),c=n.isArray(e),a=function(r,n){var e=r.replace(n,"");return e};return i=t?a:n.replaceStr,u&&e&&(c?o=e:o.push(e),o.forEach(function(n){r=i(r,n,"")})),r},this.escapeRegExp=function(r){var e=r,t=n.isString(r);return t&&(e=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),e},this.convertName=function(r){var e=r&&r.toLowerCase();return e=n.rmStr(e,["(",")"]),e=n.replaceStr(e," ","-")}}var e=r.window?window:global;"object"==typeof module&&module.exports?module.exports=new n:e.Util||(e.Util=new n)}(this);