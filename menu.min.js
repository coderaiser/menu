var MenuProto,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function u(e){var t=a(e,"js-menu-item");return t}function i(e){var t=a(e,"js-menu");return t}function a(e,t,n){var u,i;return n||(n="data-name"),e&&(i=e.getAttribute(n),i===t&&(u=!0)),u}function r(t){var n,u,i="data-menu",r="js-submenu";return u=e(t),n=a(u,r,i)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=u,this.isMenu=i,this.isSubMenu=r}MenuProto=function(n,u){function i(){var e,t=Util.isObject(u);t||(e=u,u={},u[e]=null),d=a(u),b.addEventListener("click",s),b.addEventListener("contextmenu",m)}function a(e){var t,n="",u="",i=function(e,t){var n,u,a,r,s,m,c,l='data-menu="js-submenu"',o="";t?t+=".":t="";for(n in e)r="",s="",m="",c=t+n,a=e[n],u=Util.isObject(a),u?(r=Util.render(p.MAIN,{items:i(a,c)}),s=" menu-submenu",m=" "+l):h[c]=a,o+=Util.render(p.ITEM,{name:n,subitems:r,className:s,attribute:m,path:c});return o};return u=i(e),n=Util.render(p.MAIN,{items:u}),f.innerHTML+=n,t=f.querySelector('[data-name="js-menu"]')}function r(e,t){var n,u=v.getItem(e),i=v.isName(u),a=v.isItem(u),r=v.isSubMenu(u);return i&&a||(u=document.elementFromPoint(t.x,t.y),r=v.isSubMenu(u),i=v.isName(u),a=v.isItem(u)),n={name:i,item:a,sub:r}}function s(e,t){var n,u=e.target,i=t||r(u,{x:e.clientX,y:e.clientY});i.sub?e.preventDefault():(l(),(i.name||i.item)&&(n=o(u),Util.exec(n)))}function m(e){var t=e.target,n=e.clientX,u=e.clientY,i=r(t,{x:n,y:u});i.name||i.item||i.sub?s(e,i):(d.style.left=n-5+"px",d.style.top=u-5+"px",c()),e.preventDefault()}function c(){d.classList.remove("menu-hidden")}function l(){d.classList.add("menu-hidden")}function o(e){var t,n;return e=v.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=h[t]}var d,f,b,v=new t,h={},p={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path={{ path }}>{{ name }}</label>{{ subitems }}</li>'};u?f=b=n:(f=document.body,b=e,u=n),this.show=c,this.hide=l,i()}}(window);
!function(e){"use strict";function n(){var e=this;this.exec=function(n){var t,r=e.slice(arguments,1);return e.isFunction(n)&&(t=n.apply(null,r)),t},this.isType=function(e,n){return typeof e===n},this.isFunction=function(n){return e.isType(n,"function")},this.isObject=function(n){return e.isType(n,"object")},this.slice=function(e,n){var t;return e&&(t=[].slice.call(e,n)),t},this.render=function(n,t){var r,i=!0,c="\\s*",s=["{{"+c,c+"}}"];return r=e.ownRender(n,t,s,i)},this.ownRender=function(n,t,r,i){var c,s,o,u,l,a=n;u=r[0],l=r[1]||u;for(s in t)c=t[s],c=e.exec(c)||c,o=u+s+l,a=e.replaceStr(a,o,c,i);return o=u+".*"+l,a=e.replaceStr(a,o,"",i)},this.replaceStr=function(n,t,r,i){var c=n;return n&&t&&(i||(t=e.escapeRegExp(t)),c=n.replace(new RegExp(t,"g"),r)),c},this.escapeRegExp=function(n){var t=n,r=e.isString(n);return r&&(t=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),t}}var t=e.window?window:global;"object"==typeof module&&module.exports?module.exports=new n:t.Util||(t.Util=new n)}(this);