var MenuProto,Util;!function(e){"use strict";function t(){var e=this;this.exec=function(t){var n,i=e.slice(arguments,1);return e.isFunction(t)&&(n=t.apply(null,i)),n},this.isType=function(e,t){return typeof e===t},this.isFunction=function(t){return e.isType(t,"function")},this.isObject=function(t){return e.isType(t,"object")},this.slice=function(e,t){var n;return e&&(n=[].slice.call(e,t)),n},this.render=function(t,n){var i,u=!0,r="\\s*",a=["{{"+r,r+"}}"];return i=e.ownRender(t,n,a,u)},this.ownRender=function(t,n,i,u){var r,a,s,c,o,m=t;c=i[0],o=i[1]||c;for(a in n)r=n[a],r=e.exec(r)||r,s=c+a+o,m=e.replaceStr(m,s,r,u);return s=c+".*"+o,m=e.replaceStr(m,s,"",u)},this.replaceStr=function(t,n,i,u){var r=t;return t&&n&&(u||(n=e.escapeRegExp(n)),r=t.replace(new RegExp(n,"g"),i)),r},this.escapeRegExp=function(t){var n=t,i=e.isString(t);return i&&(n=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),n}}var n=e.window?window:global;"object"==typeof module&&module.exports?module.exports=new t:n.Util||(n.Util=new t)}(this),function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=r(e,"js-menu-item");return t}function u(e){var t=r(e,"js-menu");return t}function r(e,t,n){var i,u;return n||(n="data-name"),e&&(u=e.getAttribute(n),u===t&&(i=!0)),i}function a(t){var n,i,u="data-menu",a="js-submenu";return i=e(t),n=r(i,a,u)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=u,this.isSubMenu=a}MenuProto=function(n,i){function u(){var e,t=Util.isObject(i);t||(e=i,i={},i[e]=null),d=r(i),h.addEventListener("click",s),h.addEventListener("contextmenu",c)}function r(e){var t,n="",i="",u=function(e,t){var n,i,r,a,s,c,o,m='data-menu="js-submenu"',l="";t?t+=".":t="";for(n in e)a="",s="",c="",o=t+n,r=e[n],i=Util.isObject(r),i?(a=Util.render(b.MAIN,{items:u(r,o)}),s=" menu-submenu",c=" "+m):v[o]=r,l+=Util.render(b.ITEM,{name:n,subitems:a,className:s,attribute:c,path:o});return l};return i=u(e),n=Util.render(b.MAIN,{items:i}),f.innerHTML+=n,t=f.querySelector('[data-name="js-menu"]')}function a(e){var t,n=p.getItem(e),i=p.isName(n),u=p.isItem(n),r=p.isSubMenu(n);return i&&u||(n=document.elementFromPoint(event.x,event.y),r=p.isSubMenu(n),i=p.isName(n),u=p.isItem(n)),t={name:i,item:u,sub:r}}function s(e,t){var n,i=e.target,u=t||a(i);u.sub?e.preventDefault():(m(),(u.name||u.item)&&(n=l(i),Util.exec(n)))}function c(e){var t=e.target,n=a(t),i=e.x,u=e.y;n.name||n.item||n.sub?s(e,n):(d.style.left=i-5+".px",d.style.top=u-5+".px",o()),e.preventDefault()}function o(){d.classList.remove("menu-hidden")}function m(){d.classList.add("menu-hidden")}function l(e){var t,n;return e=p.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=v[t]}var d,f,h,p=new t,v={},b={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path={{ path }}>{{ name }}</label>{{ subitems }}</li>'};i?f=h=n:(f=document.body,h=e,i=n),this.show=o,this.hide=m,u()}}(window);