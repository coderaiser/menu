!function(e){"use strict";function t(){var e=this;this.exec=function(t){var n,i=e.slice(arguments,1);return e.isFunction(t)&&(n=t.apply(null,i)),n},this.isArray=function(e){return Array.isArray(e)},this.isArrayBuffer=function(e){var t=this.getType(e),n="arraybuffer"===t;return n},this.isBoolean=function(t){return e.isType(t,"boolean")},this.isFunction=function(t){return e.isType(t,"function")},this.isNumber=function(t){return e.isType(t,"number")},this.isObject=function(t){var n=e.getType(t),i="object"===n;return i},this.isString=function(t){return e.isType(t,"string")},this.isUndefined=function(t){return e.isType(t,"undefined")},this.isFile=function(t){var n,i,r="[object File]";return n=e.execIfExist(t,"toString"),i=n===r},this.isType=function(e,t){return typeof e===t},this.getType=function(e){var t=new RegExp("\\s([a-zA-Z]+)"),n={},i=n.toString,r=i.call(e),u=r.match(t)[1],s=u.toLowerCase();return s},this.slice=function(e,t){var n;return e&&(n=[].slice.call(e,t)),n},this.render=function(t,n){var i,r=!0,u="\\s*",s=["{{"+u,u+"}}"];return i=e.ownRender(t,n,s,r)},this.ownRender=function(t,n,i,r){var u,s,a,c,o,m=t;c=i[0],o=i[1]||c;for(s in n)u=n[s],u=e.exec(u)||u,a=c+s+o,m=e.replaceStr(m,a,u,r);return a=c+".*"+o,m=e.replaceStr(m,a,"",r)},this.replaceStr=function(t,n,i,r){var u=e.isString(t),s=new RegExp(n,"g");return u&&n&&(r||(n=e.escapeRegExp(n)),t=t.replace(s,i)),t},this.escapeRegExp=function(t){var n=t,i=e.isString(t);return i&&(n=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),n}}var n=e.window?window:global;"object"==typeof module&&module.exports?module.exports=new t:n.Util||(n.Util=new t)}(this);var MenuProto,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=u(e,"js-menu-item");return t}function r(e){var t=u(e,"js-menu");return t}function u(e,t,n){var i,r;return n||(n="data-name"),e&&(r=e.getAttribute(n),r===t&&(i=!0)),i}function s(t){var n,i,r="data-menu",s="js-submenu";return i=e(t),n=u(i,s,r)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=r,this.isSubMenu=s}MenuProto=function(n,i,r){function u(){var e,t=Util.isObject(r);t||(e=r,r={},r[e]=null),p=s(r),y.addEventListener("click",c),y.addEventListener("contextmenu",o)}function s(e){var t,n="",i="",r=function(e,t){var n,i,u,s,a,c,o,m='data-menu="js-submenu"',l="";t?t+=".":t="";for(n in e)s="",a="",c="",o=t+n,u=e[n],i=Util.isObject(u),i?(s=Util.render(S.MAIN,{items:r(u,o)}),a=" menu-submenu",c=" "+m):w[o]=u,b&&b.icon&&(a+=" icon icon-"+n),l+=Util.render(S.ITEM,{name:n,subitems:s,className:a,attribute:c,path:o});return l};return i=r(e),n=Util.render(S.MAIN,{items:i}),v.innerHTML+=n,t=v.querySelector('[data-name="js-menu"]')}function a(e,t){var n,i=x.getItem(e),r=x.isName(i),u=x.isItem(i),s=x.isSubMenu(i);return r&&u||(i=document.elementFromPoint(t.x,t.y),s=x.isSubMenu(i),r=x.isName(i),u=x.isItem(i)),n={name:r,item:u,sub:s}}function c(e,t){var n,i=e.target,r=t||a(i,{x:e.clientX,y:e.clientY});r.sub?e.preventDefault():(f(),(r.name||r.item)&&(n=h(i),Util.exec(n)))}function o(e){var t=e.target,n=e.clientX,i=e.clientY,r=a(t,{x:n,y:i});r.name||r.item||r.sub?c(e,r):l(n,i),e.preventDefault()}function m(t,n){var i=Util.isNumber(t),r=Util.isNumber(n),u=d(),s=e.innerHeight;u+n>s&&(n-=u),i&&(p.style.left=t+"px"),r&&(p.style.top=n-15+"px")}function l(e,t){p.classList.remove("menu-hidden"),m(e,t)}function f(){p.classList.add("menu-hidden")}function h(e){var t,n;return e=x.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=w[t]}function d(){var e,t;return g||(e=getComputedStyle(p),t=e.height,g=parseInt(t,10)),g}var p,v,b,g,y,x=new t,w={},S={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path={{ path }}>{{ name }}</label>{{ subitems }}</li>'};r?(v=y=n,b=i):(v=document.body,y=e,i&&(r=i)),this.show=l,this.hide=f,u()}}(window);